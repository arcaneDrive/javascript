<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Firebase SPA Example</title>
  </head>
  <body>
    <div id="app"></div>
    <!-- <script src="https://www.gstatic.com/firebasejs/9.8.0/firebase-app.js"></script> -->
    
    
    <script src="https://unpkg.com/navigo"></script>
    <script >
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
        
        
        const firebaseConfig = {
          apiKey: "AIzaSyAaLAi6VjAPLEYmmMnRMmnvgHMU-g3DVwo",
          authDomain: "javascript-20519.firebaseapp.com",
          projectId: "javascript-20519",
          storageBucket: "javascript-20519.appspot.com",
          messagingSenderId: "939306648810",
          appId: "1:939306648810:web:5b11e86963313ecdfe8393",
        };
  
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
  
        // Router
        const router = new Navigo(null, true, "#!");
  
        // Route handlers
        function showLogin() {
          document.getElementById("app").innerHTML = `
                  <h1>Login</h1>
                  <form id="login-form">
                      <label for="email">Email:</label>
                      <input type="email" id="email" required>
                      <label for="password">Password:</label>
                      <input type="password" id="password" required>
                      <button type="submit">Login</button>
                  </form>
              `;
  
          document
            .getElementById("login-form")
            .addEventListener("submit", (e) => {
              e.preventDefault();
              const email = document.getElementById("email").value;
              const password = document.getElementById("password").value;
  
              auth
                .signInWithEmailAndPassword(email, password)
                .then(() => {
                  router.navigate("/welcome");
                })
                .catch((error) => {
                  console.error("Error signing in:", error);
                });
            });
        }
  
        function showWelcome() {
          document.getElementById("app").innerHTML = `
                  <h1>Welcome!</h1>
                  <p>You have successfully logged in.</p>
              `;
        }
  
        // Define routes
        router.on("/", showLogin).on("/welcome", showWelcome).resolve();
  
        // Handle authentication state
        auth.onAuthStateChanged((user) => {
          if (user) {
            router.navigate("/welcome");
          } else {
            router.navigate("/");
          }
        });
      </script>
  </body>
</html>
